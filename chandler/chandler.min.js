/*! Chandler Bing (Maps)! v0.1.0 | Apache License, Version 2.0 | https://github.com/mhulse/chandler */!function(a,b,c){"use strict";var d,e,f,g,h=null,i={id:"map"};a.init=function(a){var b;return a=o(a)?a:{},b=n(i,a),h=new Microsoft.Maps.Map(c.getElementById(b.id),b.map)},a.directions=function(a){Object.keys(a).length&&(g=a,d?m():Microsoft.Maps.loadModule("Microsoft.Maps.Directions",{callback:m}))};var j=function(){d||(d=new Microsoft.Maps.Directions.DirectionsManager(h)),d.resetDirections(),e=Microsoft.Maps.Events.addHandler(d,"directionsError",function(a){}),f=Microsoft.Maps.Events.addHandler(d,"directionsUpdated",function(){})},k=function(a){var b={};return"string"==typeof a?b.address=a:(a.address&&(b.address=a.address),a.lat&&a.lon&&(b.location=new Microsoft.Maps.Location(a.lat,a.lon))),b},l=function(a){return new Microsoft.Maps.Directions.Waypoint(k(a))},m=function(){var a,b;d||j(),d.resetDirections(),d.setRequestOptions({routeMode:Microsoft.Maps.Directions.RouteMode.driving,routeDraggable:!1}),a=l(g.from),d.addWaypoint(a),b=l(g.to),d.addWaypoint(b),d.setRenderOptions({itineraryContainer:c.getElementById("directions"),waypointPushpinOptions:{visible:!1},viapointPushpinOptions:{}}),d.calculateDirections()},n=function(a,b){var c=Array.isArray(b),d=c&&[]||{};return c?(a=a||[],d=d.concat(a),b.forEach(function(b,c){"undefined"==typeof d[c]?d[c]=b:"object"==typeof b?d[c]=n(a[c],b):-1===a.indexOf(b)&&d.push(b)})):(a&&"object"==typeof a&&Object.keys(a).forEach(function(b){d[b]=a[b]}),Object.keys(b).forEach(function(c){d[c]="object"==typeof b[c]&&b[c]&&a[c]?n(a[c],b[c]):b[c]})),d},o=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a}}(window.CHANDLER=window.CHANDLER||{},window,document,void 0);